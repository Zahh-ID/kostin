1) Peran & Hak Akses

Pencari kos (Tenant/Calon Tenant)

Browse, cari, filter (lokasi, harga, gender rules, fasilitas, AC, kamar mandi, parkir, wifi, jarak dari kampus/halte).

Lihat detail (foto/galeri, video/tour, peta, ketersediaan kamar, peraturan kos, ulasan).

Buat akun → ajukan sewa → tanda jadi/deposit → kontrak digital → bayar tagihan bulanan (QRIS).

Dashboard: tagihan & status pembayaran, riwayat sewa, tiket keluhan, pengingat jatuh tempo.

Pemilik kos (Landlord)

Daftarkan beberapa properti/cabang; untuk tiap properti bisa punya beberapa tipe kamar dan unit kamar (tiap unit bisa override spek/harga).

Kelola ketersediaan, harga musiman, diskon, deposit, biaya tambahan (listrik/prabayar/pasca, parkir).

Buat kontrak standar (template), generate invoice, terima pembayaran QRIS, auto-rekonsiliasi.

Kelola pengingat fasilitas bersama (isi sabun, gas, air galon, kebersihan) dengan interval (mingguan/harian/bulanan).

Dashboard: okupansi, pendapatan, aging piutang, performa listing (views, CTR), ulasan.

Admin

Moderasi listing (review sebelum tayang), moderasi foto/peraturan, verifikasi pemilik (KTP/NPWP opsional).

Manajemen sengketa/refund, kelola laporan & penipuan, kontrol konten (bad word filter), analytics global.

2) Fitur Utama (MVP)

Pencari kos

Pencarian dengan peta (radius & jarak), sort (termurah/terdekat/terbaru).

Filter lengkap: harga, periode (bulanan/tahunan/harian), gender rules, kamar mandi (dalam/luar), AC, furnitur, kuota listrik, hewan peliharaan, jam malam.

Halaman detail: galeri, video/tour, fasilitas, peraturan, tipe kamar & stok, kalender ketersediaan, estimasi biaya per bulan (sewa+biaya lain).

Ajukan sewa (tentukan tanggal masuk), bayar deposit/tanda jadi via QRIS, tanda tangan kontrak digital (PDF).

Pembayaran bulanan: invoice otomatis per tanggal, QRIS di dalam website, status real-time via webhook.

Pemilik kos

Multi-cabang: alamat, geolokasi (lat/long), jam kunjung, kontak.

Model kamar:

RoomType (contoh: “Single AC Kamar Mandi Dalam”) → default harga & fasilitas,

RoomUnit (nomor kamar: 101, 102 …) → bisa override harga/spek, status (available/occupied/maintenance).

Penetapan harga & kebijakan: deposit, minimal durasi, denda telat (harian), masa tenggang, pro-rate (kalau masuk di tengah bulan).

Penagihan berulang: generate invoice otomatis per tenant/kontrak, notifikasi WA/email.

Pengingat fasilitas bersama (sabun, gas, air, lampu): task berulang (RRULE), ada checklist, foto bukti.

Admin

Review & publish listing, verifikasi identitas pemilik (opsional).

Tinjau laporan konten/ulasan, kelola sengketa & refund.

Insight global: listing aktif, okupansi rata-rata, transaksi per hari, pembayaran gagal/sukses.

3) Fitur Tambahan (Bagus untuk Phase 2)

Chat in-app Tenant ↔ Pemilik (otomatis menautkan ke kontrak).

Janji temu tur (schedule kunjungan) + check-in/out digital.

E-sign kontrak (stempel waktu + hash), arsip PDF otomatis.

Kode promo/kupon & dynamic pricing (musiman/akhir bulan).

Ulasan & rating (dengan bukti stay), bintang per aspek (kebersihan, keamanan, lokasi).

Pengukuran jarak/waktu ke kampus/halte (pakai rute kendaraan umum/ojek).

Komplain & tiket (kategori: kebersihan, kerusakan, keamanan) + SLA & eskalasi.

Foto inspeksi (awal/akhir sewa) + checklist kondisi.

Integrasi WhatsApp Business untuk notifikasi & payment link (opsional).

Export laporan (CSV/XLS/PDF) untuk akuntansi.

KYC ringan pemilik (unggah KTP + selfie), tanda “Verified”.

4) Arsitektur & Tech Stack Saran

Frontend: Next.js (React) + Tailwind + shadcn/ui. Map (Mapbox/Leaflet). SSR untuk SEO listing; animasi (GSAP) tetap oke.

Backend: Laravel 11 (Sanctum/Passport untuk API), Queues (Redis) untuk email/WA, Scheduler (cron) untuk penagihan & pengingat.

Database: PostgreSQL (plus PostGIS untuk pencarian radius) atau MySQL + fungsi Haversine. Redis untuk cache/sesi.

Storage: S3-compatible (MinIO/Wasabi) untuk gambar/video. CDN untuk performa.

Pencarian: PostgreSQL FTS / Meilisearch / Elasticsearch (opsional).

Pembayaran: Midtrans Snap/Charge API (aktifkan QRIS).

Notifikasi: Email (SMTP), WA (Meta Cloud API / provider), Push (Web Push).

Observabilitas: Laravel Telescope, Sentry, audit log setiap aksi penting.

5) Skema Data Inti (ringkas)

Akun & Peran

users(id, name, email, phone, role[admin|owner|tenant], …)

owners(id, user_id, status_verifikasi)

tenants(id, user_id, ktp_no, …)

Properti & Kamar

properties(id, owner_id, name, address, lat, lng, rules_text, …)

room_types(id, property_id, name, base_price, deposit, facilities_json, area_m2, bathroom_type, …)

rooms(id, room_type_id, room_code, custom_price, status[available|occupied|maintenance], facilities_override_json, …)

Kontrak & Booking

contracts(id, tenant_id, room_id, start_date, end_date, price_per_month, billing_day, deposit_amount, grace_days, late_fee_per_day, prorate_rule, status[active|ended|canceled])

bookings(id, tenant_id, room_type_id?, room_id?, checkin_date, checkout_date, status[pending|approved|rejected|expired]) (opsional kalau pakai booking pre-kontrak)

Penagihan & Pembayaran

invoices(id, contract_id, due_date, period_month, period_year, amount, late_fee, total, status[unpaid|paid|overdue|canceled], external_order_id, qris_payload)

payments(id, invoice_id, midtrans_order_id, payment_type[qris], amount, status[success|pending|failed], paid_at, raw_webhook_json)

Ulasan & Komplain

reviews(id, contract_id, rating, comments, photos[])

tickets(id, contract_id, category, description, status, sla_due_at)

Pengingat Fasilitas Bersama

shared_tasks(id, property_id, title, description, recurrence[cron/rrule], next_run_at, assignee_user_id)

shared_task_logs(id, shared_task_id, run_at, completed_by, note, photo_url)

Moderasi & Audit

listings_moderation(id, property_id, state[pending|approved|rejected], reason)

audit_logs(id, user_id, action, entity, entity_id, meta_json, created_at)

Catatan: facilities_json bisa berupa array label (wifi, AC, kasur, meja, laundry, dapur, parkir, CCTV). Untuk override di rooms, gabungkan (room.facilities_override_json ?? room_type.facilities_json).

6) Alur Bisnis Penting

A. Pencarian & Filter

User input lokasi/keyword → query geospasial (radius), filter harga & fasilitas.

Tampilkan peta + kartu listing (SSR + cache).

Klik detail → lihat tipe kamar & unit yang tersedia + kalender.

B. Ajukan Sewa → Kontrak

Tenant pilih kamar & tanggal mulai → hitung prorate jika mulai di tengah bulan.

Sistem buat draft contract + invoice deposit.

Tenant bayar deposit via QRIS → webhook konfirmasi → kontrak aktif pada tanggal mulai.

Invoice bulanan otomatis dibuat pada billing_day tiap bulan.

C. Penagihan QRIS (Midtrans)

Buat order_id unik (INV-<contract>-<yyyymm>-<rand>), gross_amount = total tagihan.

Enabled payments set ke qris.

Simpan qris_url/payload dari Midtrans untuk ditampilkan.

Webhook (notification URL) menerima status (settlement, expire, pending) → verifikasi signature_key → update payments & invoices.status.

Atur expiry (mis. 24 jam) untuk mencegah QR lama.

Status mapping:

settlement → invoice paid

expire/cancel → tetap unpaid (bisa regenerate QR)

pending → tunggu, kirim reminder ringan

D. Denda & Masa Tenggang

Pada due_date + grace_days → mulai hitung late_fee_per_day.

Cron harian: update late_fee & total (atau kalkulasi saat render + freeze saat bayar).

E. Pengingat Fasilitas Bersama (sabun/gas)

Buat shared_tasks per properti, contoh:

“Isi sabun cuci piring” → RRULE: weekly (BYDAY=MO), jam 09:00.

“Ganti gas 3kg” → RRULE: monthly (BYMONTHDAY=1), jam 08:00.

Scheduler membaca tugas yang next_run_at <= now() → kirim notifikasi ke pemilik/penanggung jawab → buat shared_task_logs saat diselesaikan (dengan foto bukti).

7) Desain API (contoh ringkas, REST)

POST /auth/register|login

GET /properties?lat=&lng=&radius=&price_min=&price_max=&facilities[]=

GET /properties/{id} (detail + room_types + rooms availability)

Owner

POST /owner/properties (+upload foto)

POST /owner/properties/{id}/room-types

POST /owner/room-types/{id}/rooms

POST /owner/contracts (ikat tenant ke room)

GET /owner/contracts/{id}/invoices

POST /owner/shared-tasks

Tenant

POST /tenant/bookings (opsional)

POST /tenant/contracts/{id}/accept

GET /tenant/invoices / GET /tenant/invoices/{id}

POST /tenant/invoices/{id}/pay-qris → return qris_url/payload

Payments (Midtrans Webhook)

POST /payments/midtrans/webhook

Admin

GET /admin/moderations / POST /admin/moderations/{id}/approve|reject

8) Alur UI Penting

Map view + List view; sticky filter bar; skeleton loading; lazy image.

Halaman Properti: hero gallery, chip fasilitas, card tipe kamar, accordion peraturan, peta, CTA “Ajukan Sewa”.

Checkout/Payment: ringkasan tagihan → tombol “Bayar via QRIS” → tampilkan QR → polling status (atau Pusher untuk realtime).

Dashboard Owner: kartu metrik (Okupansi, Pendapatan bulan ini, Invoice jatuh tempo), tabel kontrak, tab Tugas Bersama (pengingat).

Dashboard Tenant: kartu tagihan aktif, kalender jatuh tempo, histori pembayaran, tombol Download Kontrak (PDF).

9) Validasi & Keamanan

Validasi alamat & geolokasi; sanitasi input; rate-limit endpoint publik.

Cek tumpang tindih kontrak (room tidak boleh dobel sewa).

Role-based policy (Gate/Policy Laravel).

Simpan semua callback payment (audit), verifikasi signature_key.

GDPR-like: bisa minta penghapusan data (khusus tenant).

Watermark foto untuk cegah scraping (opsional).

10) Migrasi/Implementasi Cepat (Laravel)

Pakai Laravel Breeze/Jetstream (Auth), Spatie Roles/Permissions, Laravel Cashier? (kalau multi-gateway; untuk Midtrans cukup custom).

Job/Queue: SendInvoiceReminderJob, GenerateMonthlyInvoicesJob, SharedTaskNotifierJob.

Command Scheduler:

dailyAt('08:00') → generate invoice + reminder

everyMinute() → cek shared_tasks.next_run_at

Storage: gunakan disk s3 untuk foto (thumbnail + compression pipeline).

Testing: Pest/PhpUnit untuk unit + HTTP tests (webhook, kontrak overlap).

11) Roadmap Pengembangan

MVP (2–4 minggu dev fokus)

Auth + Role; CRUD properti/kamar; listing publik + filter dasar.

Kontrak sederhana; invoice bulanan; pembayaran QRIS; webhook.

Dashboard Owner/Tenant; pengingat fasilitas (RRULE minimal).

Moderasi listing oleh admin.

Phase 2

Chat in-app, tiket komplain, ulasan terverifikasi, e-sign; harga musiman; kupon.

Analytics lanjutan & export; integrasi WhatsApp Business.